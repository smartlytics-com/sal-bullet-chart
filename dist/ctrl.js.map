{"version":3,"sources":["../src/ctrl.js"],"names":["d3","panelDefaults","fontSizes","fontTypes","colors","bullet","titleFontSize","subtitleFontSize","outerEdgeCol","innerCol","pivotCol","needleCol","unitsLabelCol","tickLabelCol","tickColMaj","tickColMin","tickFont","titleFont","subtitleFont","titleCol","subtitleCol","rangeCol","measureCol","markerCol","tickCol","rangesColor","measuresColor","ranges","measures","markers","D3BulletPanelCtrl","$scope","$injector","alertSrv","_","defaults","panel","bulletDivId","id","containerDivId","scoperef","alertSrvRef","initialized","panelContainer","svgContainer","svg","panelWidth","panelHeight","bulletObject","bulletsData","data","value","valueFormatted","valueRounded","series","events","on","onInitEditMode","bind","onDataReceived","onDataError","panels","grafanaBootData","settings","thisPanel","pluginId","thisPanelPath","baseUrl","optionsPath","addEditorTab","container","trueWidth","span","offsetParent","clientWidth","viewPortWidth","Math","max","document","documentElement","window","innerWidth","pixelsPerSpan","round","tmpPanelHeight","height","String","panelTitleOffset","title","containerHeight","row","replace","actualHeight","parseInt","length","remove","getPanelWidthBySpan","getPanelHeight","margin","top","right","bottom","left","width","rangeColChange","measureColChange","chart","options","select","selectAll","enter","append","attr","call","style","text","d","subtitle","datum","randomize","duration","randomizer","map","k","random","color","p","temp","result","slice","floor","toString","padStart","i","push","getRandomColor","render","scope","elem","attrs","ctrl","bulletByClass","find","childNodes","setContainer","renderBullet","renderingCompleted","isNumber","decimals","scaledDecimals","delta","dec","log","LN10","magn","pow","norm","size","err","dataList","columns","j","rows","hasOwnProperty","match","Number","serie","alias","stats","min","toFixed","range","avg","seriesHandler","parseSeries","parseTableQueryData","updateBullet","seriesData","TimeSeries","datapoints","target","flotpairs","getFlotPairs","nullPointMode","MetricsPanelCtrl","templateUrl"],"mappings":"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","file":"ctrl.js","sourcesContent":["import {MetricsPanelCtrl} from 'app/plugins/sdk';\nimport _ from 'lodash';\nimport $ from 'jquery';\nimport TimeSeries from 'app/core/time_series2';\nimport * as d3 from './external/d3.v3.min';\nimport './css/panel.css!';\nimport './external/d3bullet';\n\nconst panelDefaults = {\n  fontSizes: [4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70],\n  fontTypes: [\n    'Arial', 'Avant Garde', 'Bookman',\n    'Consolas', 'Courier', 'Courier New',\n    'Garamond', 'Helvetica', 'Open Sans',\n    'Palatino', 'Times', 'Times New Roman',\n    'Verdana'\n  ],\n  colors: [\"rgba(245, 54, 54, 0.9)\", \"rgba(237, 129, 40, 0.89)\", \"rgba(50, 172, 45, 0.97)\"],\n  bullet: {\n    titleFontSize: 22,\n    subtitleFontSize: 18,\n    outerEdgeCol:  '#0099CC',\n    innerCol:      '#fff',\n    pivotCol:      '#999',\n    needleCol:     '#0099CC',\n    unitsLabelCol: '#000',\n    tickLabelCol:  '#000',\n    tickColMaj:    '#0099CC',\n    tickColMin:    '#000',\n    tickFont: 'Open Sans',\n    titleFont: 'Open Sans',\n    subtitleFont: 'Open Sans',\n    titleCol: '#fff',\n    subtitleCol: '#999',\n    rangeCol: '#0099CC',\n    measureCol:'#7eb26d',\n    markerCol: '#000',\n    tickCol: '#FFF',\n    rangesColor: [],\n    measuresColor : [],\n    ranges:\"50,100,150\",\n    measures:\"125,140\",\n    markers:\"130\"\n  },\n};\n\nclass D3BulletPanelCtrl extends MetricsPanelCtrl {\n\n  constructor($scope, $injector, alertSrv) {\n    super($scope, $injector);\n    // merge existing settings with our defaults\n    _.defaults(this.panel, panelDefaults);\n    this.panel.bulletDivId = 'd3bullet_svg_' + this.panel.id;\n    this.containerDivId = 'container_'+this.panel.bulletDivId;\n    this.scoperef = $scope;\n    this.alertSrvRef = alertSrv;\n    this.initialized = false;\n    this.panelContainer = null;\n    this.panel.svgContainer = null;\n    this.svg = null;\n    this.panelWidth = null;\n    this.panelHeight = null;\n    this.bulletObject = null;\n    this.bulletsData =[];\n    this.data = {\n      value: 0,\n      valueFormatted: 0,\n      valueRounded: 0\n    };\n    this.series = [];\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    //this.events.on('render', this.onRender.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n  }\n\n  onInitEditMode() {\n    // determine the path to this plugin\n    var panels = grafanaBootData.settings.panels;\n    var thisPanel = panels[this.pluginId];\n    var thisPanelPath = thisPanel.baseUrl + '/';\n    //add the relative path to the partial\n    var optionsPath = thisPanelPath + 'partials/editor.options.html';\n    this.addEditorTab('Options', optionsPath, 2);\n    // var radialMetricsPath = thisPanelPath + 'partials/editor.radialmetrics.html';\n    // this.addEditorTab('Radial Metrics', radialMetricsPath, 3);\n    // var thresholdingPath = thisPanelPath + 'partials/editor.thresholding.html';\n    // this.addEditorTab('Thresholding', thresholdingPath, 4);\n    // var mappingsPath = thisPanelPath + 'partials/editor.mappings.html';\n    // this.addEditorTab('Value Mappings', mappingsPath, 5);\n  }\n\n  /**\n   * [setContainer description]\n   * @param {[type]} container [description]\n   */\n  setContainer(container) {\n    this.panelContainer = container;\n    this.panel.svgContainer = container;\n  }\n\n  // determine the width of a panel by the span and viewport\n  getPanelWidthBySpan() {\n    var trueWidth = 0;\n    if (typeof this.panel.span === 'undefined') {\n      // get the width based on the scaled container (v5 needs this)\n      trueWidth = this.panelContainer.offsetParent.clientWidth;\n    } else {\n      // v4 and previous used fixed spans\n      var viewPortWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n      // get the pixels of a span\n      var pixelsPerSpan = viewPortWidth / 12;\n      // multiply num spans by pixelsPerSpan\n      trueWidth = Math.round(this.panel.span * pixelsPerSpan);\n    }\n    return trueWidth;\n  }\n\n  getPanelHeight() {\n    // panel can have a fixed height set via \"General\" tab in panel editor\n    var tmpPanelHeight = this.panel.height;\n    if ((typeof tmpPanelHeight === 'undefined') || (tmpPanelHeight === \"\")) {\n      // grafana also supplies the height, try to use that if the panel does not have a height\n      tmpPanelHeight = String(this.height);\n      // v4 and earlier define this height, detect span for pre-v5\n      if (typeof this.panel.span != 'undefined') {\n        // if there is no header, adjust height to use all space available\n        var panelTitleOffset = 20;\n        if (this.panel.title !== \"\") {\n          panelTitleOffset = 42;\n        }\n        tmpPanelHeight = String(this.containerHeight - panelTitleOffset); // offset for header\n      }\n      if (typeof tmpPanelHeight === 'undefined') {\n        // height still cannot be determined, get it from the row instead\n        tmpPanelHeight = this.row.height;\n        if (typeof tmpPanelHeight === 'undefined') {\n          // last resort - default to 250px (this should never happen)\n          tmpPanelHeight = \"250\";\n        }\n      }\n    }\n    // replace px\n    tmpPanelHeight = tmpPanelHeight.replace(\"px\",\"\");\n    // convert to numeric value\n    var actualHeight = parseInt(tmpPanelHeight);\n    return actualHeight;\n  }\n\n  clearSVG() {\n    if ($('#'+this.panel.bulletDivId).length) {\n      //console.log(\"Clearing SVG id: \" + this.panel.bulletDivId);\n      $('#'+this.panel.bulletDivId).remove();\n    }\n  }\n\n  renderBullet() {\n    // update the values to be sent to the bullet constructor\n    if ($('#'+this.panel.bulletDivId).length) {\n      $('#'+this.panel.bulletDivId).remove();\n    }\n    $('.bullet').remove();\n    this.panelWidth = this.getPanelWidthBySpan();\n    this.panelHeight = this.getPanelHeight();\n    var data = this.bulletsData;\n    var margin = {top: 10, right: 40, bottom: 40, left: 120};\n    var width = this.panelWidth - margin.left - margin.right;\n    var height = this.panelHeight/data.length - margin.top - margin.bottom;\n    height = height > 5 ? height:5;\n    // set the width and height to be double the radius\n\n    if(this.panel.bullet.rangesColor.length === 0){\n      this.rangeColChange();\n    }\n    if(this.panel.bullet.measuresColor.length === 0){\n      this.measureColChange();\n    }\n    var chart = d3.bullet()\n      .width(width)\n      .height(height)\n      .options(this.panel.bullet);\n\n    this.svg = d3.select(\"#\" + this.containerDivId).selectAll(\"svg\")\n        .data(data)\n      .enter().append(\"svg\")\n        .attr(\"class\", \"bullet\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n        .call(chart);\n\n    var title = this.svg.append(\"g\")\n        .style(\"text-anchor\", \"end\")\n        .attr(\"transform\", \"translate(-6,\" + height / 2 + \")\");\n\n    title.append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"font-family\", this.panel.bullet.titleFont)\n        .attr(\"font-size\", this.panel.bullet.titleFontSize + \"px\")\n        .attr(\"fill\", this.panel.bullet.titleCol)\n        .text(function(d) { return d.title; });\n\n    title.append(\"text\")\n        .attr(\"class\", \"subtitle\")\n        .attr(\"font-family\", this.panel.bullet.subtitleFont)\n        .attr(\"font-size\", this.panel.bullet.subtitleFontSize + \"px\")\n        .attr(\"fill\", this.panel.bullet.subtitleCol)\n        .attr(\"dy\", \"1em\")\n        .text(function(d) { return d.subtitle; });\n\n    d3.selectAll(\"button\").on(\"click\", function() {\n      this.svg.datum(randomize).call(chart.duration(1000)); // TODO automatic transition\n    });\n  }\n  randomize(d) {\n    if (!d.randomizer) d.randomizer = randomizer(d);\n    d.ranges = d.ranges.map(d.randomizer);\n    d.markers = d.markers.map(d.randomizer);\n    d.measures = d.measures.map(d.randomizer);\n    return d;\n  }\n\n  randomizer(d) {\n    var k = d3.max(d.ranges) * 0.2;\n    return function(d) {\n      return Math.max(0, d + k * (Math.random() - 0.5));\n    };\n  }\n\n  getRandomColor(color) {\n    var p = 1,temp,random = Math.random(),result = '#';\n    while (p < color.length) {\n      temp = parseInt(color.slice(p, p += 2), 16);\n      temp += Math.floor((255 - temp) * random);\n      result += temp.toString(16).padStart(2, '0');\n    }\n    return result;\n  }\n\n  rangeColChange(){\n    var rangesColor = [];\n    var color = this.panel.bullet.rangeCol;\n    for (var i = 0; i < 30; i++) {\n      rangesColor.push(this.getRandomColor(color));\n    }\n    if(this.panel.bullet.rangesColor.length > 0){\n      this.panel.bullet.rangesColor = rangesColor;\n      this.render();\n    }\n    else{\n      this.panel.bullet.rangesColor = rangesColor;\n    }\n  }\n\n  measureColChange(){\n    var color = this.panel.bullet.measureCol;\n    var measuresColor = [];\n    for (var i = 0; i < 30; i++) {\n      measuresColor.push(this.getRandomColor(color));\n    }\n    if(this.panel.bullet.measuresColor.length > 0){\n      this.panel.bullet.measuresColor = measuresColor;\n      this.render();\n    }\n    else{\n      this.panel.bullet.measuresColor = measuresColor;\n    }\n  }\n\n  link(scope, elem, attrs, ctrl) {\n    //console.log(\"d3bullet inside link\");\n    var bulletByClass = elem.find('.grafana-d3-bullet');\n    //bulletByClass.append('<center><div id=\"'+ctrl.containerDivId+'\"></div></center>');\n    bulletByClass.append('<div id=\"'+ctrl.containerDivId+'\"></div>');\n    var container = bulletByClass[0].childNodes[0];\n    ctrl.setContainer(container);\n    function render() {\n      ctrl.renderBullet();\n    }\n    this.events.on('render', function() {\n      render();\n      ctrl.renderingCompleted();\n    });\n  }\n\n  getDecimalsForValue(value) {\n    if (_.isNumber(this.panel.decimals)) {\n      return {decimals: this.panel.decimals, scaledDecimals: null};\n    }\n\n    var delta = value / 2;\n    var dec = -Math.floor(Math.log(delta) / Math.LN10);\n\n    var magn = Math.pow(10, -dec),\n        norm = delta / magn, // norm is between 1.0 and 10.0\n        size;\n\n    if (norm < 1.5) {\n      size = 1;\n    } else if (norm < 3) {\n      size = 2;\n      // special case for 2.5, requires an extra decimal\n      if (norm > 2.25) {\n        size = 2.5;\n        ++dec;\n      }\n    } else if (norm < 7.5) {\n      size = 5;\n    } else {\n      size = 10;\n    }\n\n    size *= magn;\n\n    // reduce starting decimals if not needed\n    if (Math.floor(value) === value) { dec = 0; }\n\n    var result = {};\n    result.decimals = Math.max(0, dec);\n    result.scaledDecimals = result.decimals - Math.floor(Math.log(size) / Math.LN10) + 2;\n    return result;\n  }\n\n  onDataError(err) {\n    this.onDataReceived([]);\n  }\n\n  parseTableQueryData(dataList){\n    var columns = {};\n    var bulletsData = [];\n    for(var i = 0; i < dataList[0].columns.length; i++){\n      columns[dataList[0].columns[i].text] = i;\n    }\n    for(i = 0; i < dataList.length; i++){\n      for(var j = 0; j < dataList[i].rows.length; j++){\n        var title = \"\";\n        var subtitle = \"\";\n        var ranges = [];\n        var markers = [];\n        var measures = [];\n        if(columns.hasOwnProperty(\"title\")){\n          title = dataList[i].rows[j][columns.title];\n        }\n        else{\n          title = \"Title\" + i;\n        }\n        if(columns.hasOwnProperty(\"subtitle\")){\n          subtitle = dataList[i].rows[j][columns.subtitle];\n        }\n        else{\n          subtitle = \"Subtitle\" + i;\n        }\n        if(columns.hasOwnProperty(\"ranges\")){\n          ranges = dataList[i].rows[j][columns.ranges].toString().match(/\\d+/g).map(Number);\n        }\n        else{\n          ranges = this.panel.bullet.ranges.toString().match(/\\d+/g).map(Number);\n        }\n        if(columns.hasOwnProperty(\"measures\")){\n          measures = dataList[i].rows[j][columns.measures].toString().match(/\\d+/g).map(Number);\n        }\n        else{\n          measures = this.panel.bullet.measures.toString().match(/\\d+/g).map(Number);\n        }\n        if(columns.hasOwnProperty(\"markers\")){\n          markers = dataList[i].rows[j][columns.markers].toString().match(/\\d+/g).map(Number);\n        }\n        else{\n          markers = this.panel.bullet.markers.toString().match(/\\d+/g).map(Number);\n        }\n        bulletsData.push({\n          title: title,\n          subtitle: subtitle,\n          ranges: ranges,\n          measures: measures,\n          markers: markers\n        });\n      }\n    }\n    return bulletsData;\n  }\n\n  parseSeries(series) {\n    return _.map(this.series, (serie, i) => {\n      return {\n        title: serie.alias,\n        subtitle:serie.alias,\n        ranges: [parseInt(serie.stats.min.toFixed(2)), parseInt(serie.stats.max.toFixed(2))- parseInt(serie.stats.range.toFixed(2))/2 ,parseInt(serie.stats.max.toFixed(2))],\n        measures:[parseInt(serie.stats.min.toFixed(2)) + parseInt(serie.stats.range.toFixed(2))/3, parseInt(serie.stats.min.toFixed(2)) + parseInt(serie.stats.range.toFixed(2))/3*2],\n        markers:[parseInt(serie.stats.avg.toFixed(2))]\n      };\n    });\n  }\n  onDataReceived(dataList) {\n    var data = {};\n    if(dataList.length > 0){\n      if(dataList[0].hasOwnProperty(\"datapoints\")){\n        this.series = dataList.map(this.seriesHandler.bind(this));\n        this.bulletsData = this.parseSeries(this.series);\n      }\n      else if(dataList[0].hasOwnProperty(\"type\")){\n        this.bulletsData = this.parseTableQueryData(dataList);\n      }\n    }\n    if(this.bulletObject !== null){\n      this.bulletObject.updateBullet(data.value, data.valueFormatted, data.valueRounded);\n    } else {\n      // render bullet\n      this.render();\n    }\n  }\n\n  seriesHandler(seriesData) {\n    var series = new TimeSeries({\n      datapoints: seriesData.datapoints,\n      alias: seriesData.target,\n    });\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\n    return series;\n  }\n}\n\nD3BulletPanelCtrl.templateUrl = 'partials/template.html';\nexport {\n  D3BulletPanelCtrl,\n  D3BulletPanelCtrl as MetricsPanelCtrl\n};\n"]}